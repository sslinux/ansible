# Handlers

* handlers也是一些task的列表，和一般的task并没有什么区别。

* 是由通知者进行的notify，如果没有被notify，则Handlers不会执行，假如被notify了，则Handlers被执行

* 不管有多少个通知者进行了notify，等到play中的所有task执行完成之后，handlers也只会被执行一次.


```yaml
[root@blog playbooks]# cat handlers.yml
- hosts: 192.168.1.44
  remote_user: sslinux
  become: yes
  become_user: root
  become_method: su
  tasks:
    - name: install httpd package
      yum: name=httpd state=latest
    - name: install configuation file for httpd
      copy: src=/opt/httpd.conf dest=/etc/httpd/conf/httpd.conf
      notify:
       - restart httpd    # 此处只比notify缩进一格
    - name: start httpd
      service: enabled=true name=httpd state=started
  handlers:
    - name: restart httpd
      service: name=httpd state=restarted
    - name: show httpd configuration file   # 没有被notify的handler不会被执行；
      command: cat /etc/httpd/conf/httpd.conf 
```

```bash
[root@blog playbooks]# ansible-playbook handlers.yml 

PLAY [192.168.1.44] *******************************************************************************************************************************************************************************************************************************

TASK [Gathering Facts] ****************************************************************************************************************************************************************************************************************************
ok: [192.168.1.44]

TASK [install httpd package] **********************************************************************************************************************************************************************************************************************
ok: [192.168.1.44]

TASK [install configuation file for httpd] ********************************************************************************************************************************************************************************************************
changed: [192.168.1.44]

TASK [start httpd] ********************************************************************************************************************************************************************************************************************************
ok: [192.168.1.44]

RUNNING HANDLER [restart httpd] *******************************************************************************************************************************************************************************************************************
changed: [192.168.1.44]

PLAY RECAP ****************************************************************************************************************************************************************************************************************************************
192.168.1.44               : ok=5    changed=2    unreachable=0    failed=0   

```